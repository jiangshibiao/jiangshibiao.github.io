<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>2021 数智马拉松大赛 | Technology Comes First</title><meta name="author" content="jiangshibiao"><meta name="copyright" content="jiangshibiao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="记录了我 2021.9 获得数智马拉松一等奖的比赛历程。">
<meta property="og:type" content="article">
<meta property="og:title" content="2021 数智马拉松大赛">
<meta property="og:url" content="https://jiangshibiao.github.io/Datathon2021/index.html">
<meta property="og:site_name" content="Technology Comes First">
<meta property="og:description" content="记录了我 2021.9 获得数智马拉松一等奖的比赛历程。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jiangshibiao.github.io/post_images/Datathon2021.jpg">
<meta property="article:published_time" content="2021-09-08T23:03:03.000Z">
<meta property="article:modified_time" content="2023-07-26T16:00:00.000Z">
<meta property="article:author" content="jiangshibiao">
<meta property="article:tag" content="Competition">
<meta property="article:tag" content="Log">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jiangshibiao.github.io/post_images/Datathon2021.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "2021 数智马拉松大赛",
  "url": "https://jiangshibiao.github.io/Datathon2021/",
  "image": "https://jiangshibiao.github.io/post_images/Datathon2021.jpg",
  "datePublished": "2021-09-08T23:03:03.000Z",
  "dateModified": "2023-07-26T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "jiangshibiao",
      "url": "https://jiangshibiao.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/images/mylogo.jpg"><link rel="canonical" href="https://jiangshibiao.github.io/Datathon2021/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '2021 数智马拉松大赛',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Technology Comes First" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/friendlink/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(../post_images/Datathon2021.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Technology Comes First</span></a><a class="nav-page-title" href="/"><span class="site-name">2021 数智马拉松大赛</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/friendlink/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">2021 数智马拉松大赛</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-09-08T23:03:03.000Z" title="Created 2021-09-09 2021-09-09T07:03:03+08:00">2021-09-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-07-26T16:00:00.000Z" title="Updated 2023-07-27 2023-07-27T00:00:00+08:00">2023-07-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Algo/">Algo</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">6.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>19mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>从学长那儿听说了 <a target="_blank" rel="noopener" href="https://www.getui.com/event/2021-datathon">数智马拉松 2021</a>。我以前只打算法类比赛，就想以这个作为切入口，体验一下大数据 &amp; AI 方向的比赛。<s>加之官网上标的奖金比较高</s>，我就去报名参加啦。</p>
<p>数智马拉松由每日互动和杭州市政府举办，规格很高，服务也很到位。要是宣传做得再大一些就好啦~</p>
<h2 id="海选-组队">海选 &amp; 组队</h2>
<p>数智马拉松 2021 的海选赛时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8.1</mn><mo>−</mo><mn>8.30</mn></mrow><annotation encoding="application/x-tex">8.1-8.30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">8.1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8.30</span></span></span></span>。我在八月中旬打听到比赛，加了群但一直没时间做海选题。到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8.30</mn></mrow><annotation encoding="application/x-tex">8.30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8.30</span></span></span></span> 上午 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>:</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">10:30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span></span></span></span> 的时候猛然想起，打开官网一看只剩 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.5</mn></mrow><annotation encoding="application/x-tex">1.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.5</span></span></span></span> 小时了……于是迅速下数据准备 rush 一波……</p>
<p>海选赛提供了一段高速上若干个检测点的信息（该点附近各条道路的通车量和通车速度），最后让你预测在某个时刻通过这段高速要花的时间。我本打算随便训个 sklearn 模型，但是提取数据了后发现模型不是那么显然，而且已经没时间构造特征了。最后我分别统计了历史时期正反方向通过这段高速的平均时间，直接用这两个值进行预测。</p>
<p>结束前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">10min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">10</span><span class="mord mathnormal">min</span></span></span></span> 才搞完，惊出我一身冷汗。提交时还遇到了一些小插曲：我这 DC 网站崩了，托大赛的 QQ 小助手帮忙提交。当小助手告诉我分数是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2250.029</mn></mrow><annotation encoding="application/x-tex">2250.029</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2250.029</span></span></span></span> 且成功晋级时，感觉十分侥幸。</p>
<p>本来我是决定一个人组队的。后来组委会联系我说，因为我的账号在 DC 网站上没有记录，复赛时候提交可能不方便，建议我组个队。他们向我推荐了张皓焜，也就是我后来的队友。</p>
<p>临行前我还去请教一位对 AI 比赛造诣很深的学长，他说结构化数据用 <strong>lightgbm</strong> 和 <strong>xgboost</strong> 就能搞定。</p>
<h2 id="抵达现场-夏令营">抵达现场 &amp; 夏令营</h2>
<p>作为本科毕业后刚上班的社畜，抽空来参加比赛着实不容易。由于组委会要求提供三天内的核酸阴性证明，我还得在周五下班后去医院挂急诊做核酸，花了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo>+</mo></mrow><annotation encoding="application/x-tex">100+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">100</span><span class="mord">+</span></span></span></span>。这是我新冠以来第一次做核酸，做的是鼻拭子，痒了好久。</p>
<p>看群里大家周五中午已陆续抵达，在分享风景有多好看、晚宴有多好吃，我却只能干流口水。</p>
<p><img src="/Datathon2021/photo.jpg" alt></p>
<p>周六早上拿完核酸报告后，我从杭州东站乘高铁到千岛湖，再打车去比赛场地——千岛湖两山高层次人才集聚区。这个地方坐落在千岛湖边，集会议室 &amp; 餐厅 &amp; 客房为一体，风景甚是漂亮。好多选手都说想去外面捕鱼。</p>
<p><img src="/Datathon2021/destination.jpg" alt></p>
<p>周六全天是培训课程，干货满满。旅途匆匆，没赶上心心念念的吴嘉之老师的讲课，可惜了。</p>
<p><img src="/Datathon2021/class.jpg" alt></p>
<p>我从上午的《个推大数据营销》开始听，一直听到最后的《每日治数平台架构与应用实践》，还很积极地在结束后向讲课人提问。听下来最喜欢的是胡东平主人的自动化视觉智能，讲得很接地气很实在。李玺老师正好是我本科时的班主任，他的视觉计算 PPT 像是《实验室最新科研成果报告》，看得我云里雾里。</p>
<p><img src="/Datathon2021/official.jpg" alt></p>
<p><strong>不得不强调</strong>，比赛的组织者们真的很用心，一日三餐都很丰盛，零食水果不间断供应，晚上还有豪华夜宵。可惜后两天我一门心思都在比赛上，根本没时间静下来吃东西。<s>早知道把女朋友带来享受生活了</s>。</p>
<p><img src="/Datathon2021/dinner.jpg" alt></p>
<p><img src="/Datathon2021/fruit.jpg" alt></p>
<p><img src="/Datathon2021/snack.jpg" alt></p>
<p>我的队友 &amp; 室友叫张皓焜，是浙大舟山校区海洋学院的研究生一年级，<s>属于背着导师偷偷来比赛这种</s>。我们简单地商量了一下，取了个霸气的队名“只想要赚钱”。中午的时候顺便去外面合了个影~</p>
<p><img src="/Datathon2021/teammate.jpg" alt></p>
<p>比赛前一天晚上组织了环岛一周的散步。想到第二天就没这个闲情逸致了，我连忙跟上了大部队。可惜晚上太黑了啥也看不见（而我早上又起不来欣赏美景呜呜呜）。只能放几张白天时候的千岛湖照片充充数~</p>
<p><img src="/Datathon2021/scene.jpg" alt></p>
<h2 id="复赛比赛记录">复赛比赛记录</h2>
<p>初赛赛题和公共交通预测有关，由资深算法专家<strong>吴嘉之</strong>领衔出题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">我们给出的数据包括公交轨迹数据和公交线路设置两部分。公交轨迹数据包含22条路线，时间范围为3月8日至3月21日两周，选手需要预测的数据分为以下两种情况：</span><br><span class="line"></span><br><span class="line">A:	22条公交线路在3月22日至3月28日一周内的站到站运行时间</span><br><span class="line">B:	7条相同区域内未给出轨迹数据的路线在3月7日至3月28日三周内的站到站运行时间</span><br><span class="line"></span><br><span class="line">待预测的起始和到达车站至少距离5站。</span><br></pre></td></tr></table></figure>
<p><code>train.csv</code> 里给出了 1kw+ 条车载设备的上传数据，包括：</p>
<ul>
<li><code>(line, dir)</code>：公交车的线路名称和方向（上行、下行或环行）。</li>
<li><code>device</code>：该车载设备的唯一识别号（可理解和公交车绑定）。</li>
<li><code>(time, long, lat)</code>：该记录的形成时间，以及此时所在的经纬度。</li>
</ul>
<p><code>route.csv</code> 里给出了所有公交车线路，包括线路名称和方向、经过的每个车站的经纬度。</p>
<p><code>challenge.csv</code> 里给出了所有待预测数据，总共有 2.5w+ 条。AB 类型的问题的询问格式相同，每条包括公交车的线路名称和方向、出发站和到达站的站名、出发站的时刻，让你预测抵达到达站的运行时间（以秒为单位）。</p>
<p>评分标准是：预测值和真实值之间求 MSE。即如果每个询问误差 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">5min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">5</span><span class="mord mathnormal">min</span></span></span></span>，得分为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mi>E</mi><mo>=</mo><mn>9</mn><mo>×</mo><msup><mn>10</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">MSE=9 \times10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">MSE</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>。</p>
<h4 id="9-5-10-00-18-00">9.5 10:00-18:00</h4>
<p>公交站点和线路均选自温州市，且大部分站点可以直接在高德地图上查询到（除了一年内变动的站点）。</p>
<p>下载数据后，我首先在 <code>route.csv</code> 里发现了这样一件事：同名的公交车站可能具有不同（但是相差很小）的经纬度，因为它们是两个方向上面对面的站。在预处理时数据时还遇到更极端的情况，有些站甚至有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>∼</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">3\sim4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 个位置。</p>
<p>把 <code>train.csv</code> 里的数据按不同 device 划分是自然的想法。划分完后我发现：每趟车会有一段连续的记录，然后会无信号直到下一次发车；正常情况下，设备会在运行途中每隔 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">8s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mord mathnormal">s</span></span></span></span> 记录一次数据。因为是取自现实的场景，总有各种奇奇怪怪的现象发生，需要用更细致的规则去处理，如：</p>
<ol>
<li>某个设备可能在相同时刻记录多条数据。</li>
<li>相邻两次记录的间隔不是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">8s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mord mathnormal">s</span></span></span></span>，而是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mn>7</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>10</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">1,2,3,\dots,7,9,10s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">10</span><span class="mord mathnormal">s</span></span></span></span> 。</li>
<li>相邻两次记录的间隔是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn><mi>s</mi><mo separator="true">,</mo><mn>32</mn><mi>s</mi><mo separator="true">,</mo><mn>40</mn><mi>s</mi><mo separator="true">,</mo><mo>…</mo></mrow><annotation encoding="application/x-tex">16s, 32s, 40s, \dots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">16</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">32</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">40</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span></span></span></span> （<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">8s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mord mathnormal">s</span></span></span></span> 的倍数），中间有几个点短暂丢失。</li>
<li>相邻两次记录的间隔很大（可视化后应该是同一趟车），中间连续的一段记录都丢失。</li>
</ol>
<p>张同学通过可视化，推定每 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>h</mi></mrow><annotation encoding="application/x-tex">1h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1</span><span class="mord mathnormal">h</span></span></span></span> 分趟比较好（同一 device 相邻两次记录的间隔过长视为两趟）。</p>
<p>为了方便后续的训练和预测，还有一个很重要的预处理是：把当前 <strong>每趟车的轨迹点数据</strong> 转化成 <strong>每趟车经过每个车站时的时间戳数据</strong>。这中间有个近似的过程，我在实现的时候先枚举每个站点，然后找离它经纬度坐标最近的那些轨迹点，最后找个前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>2</mn><mi mathvariant="normal">/</mi><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k(k=2/3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2/3</span><span class="mclose">)</span></span></span></span> 小的轨迹点，并取它们时间戳的平均值。为了优化速度和准确性，我会按前后顺序枚举站点，每个站点枚举的轨迹点下标必须大于前一个站点的最优轨迹点下标。</p>
<h4 id="9-5-18-20-9-5-24-00">9.5 18:20 - 9.5 24:00</h4>
<p>有了转化后的历史车次的到站时间戳数据，得到 A 问题的 baseline：找到询问中对应线路和方向的所有车次，把它们花的时间求个平均值。这里无须考虑中间站点的停靠时间，因为历史车次的时间戳已经包含了这个情况。</p>
<p>B 问题可以间接的做。虽然 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>→</mo><msub><mi>a</mi><mn>1</mn></msub><mo>→</mo><msub><mi>a</mi><mn>2</mn></msub><mo>→</mo><mo>⋯</mo><mo>→</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_0 \rightarrow a_1 \rightarrow a_2 \rightarrow \dots \rightarrow a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的整条轨迹没有出现过，但相邻车站的通路 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>→</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">a_i \rightarrow a_{i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span> 很可能被某些车次的轨迹覆盖过。我们可以参考历史上经过这段路的平均用时，如果一条都不存在，就用近似距离除上公交车平均速度来暴力估计。根据统计数据，大概 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>85</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">85\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">85%</span></span></span></span> 的相邻通路被至少一条轨迹覆盖过。</p>
<p>我在调程序的过程中发现 <code>routes.csv</code> 里的环形线路存在问题。温州的环形公交不是圆形而是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span></span></span></span> 形，所以经过的公交站形式是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>→</mo><msub><mi>a</mi><mn>1</mn></msub><mo>→</mo><mo>⋯</mo><mo>→</mo><msub><mi>a</mi><mi>k</mi></msub><mo>→</mo><msub><mi>a</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>→</mo><mo>⋯</mo><mo>→</mo><msub><mi>a</mi><mi>m</mi></msub><mo>→</mo><msub><mi>a</mi><mi>k</mi></msub><mo>→</mo><msub><mi>a</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>→</mo><mo>⋯</mo><mo>→</mo><msub><mi>a</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">a_0 \rightarrow a_1 \rightarrow \dots \rightarrow a_k \rightarrow a_{k+1} \rightarrow \dots \rightarrow a_m \rightarrow a_k \rightarrow a_{k-1} \rightarrow \dots \rightarrow a_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（重复的那段路的公交站名可能不完全重合）。而 <code>routes.csv</code> 里描述环形线路时会省去末尾 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>k</mi></msub><mo>→</mo><msub><mi>a</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>→</mo><mo>⋯</mo><mo>→</mo><msub><mi>a</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">a_k \rightarrow a_{k-1} \rightarrow \dots \rightarrow a_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 这段路。更准确地说，会省去后面这段路中所有在之前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>→</mo><mo>⋯</mo><mo>→</mo><msub><mi>a</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">a_0 \rightarrow \dots \rightarrow a_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 里出现过的公交站（大概出题人做了错误地去重操作）。</p>
<p>我找张同学确认了这个问题，并着手修复数据。一个很大的挑战是：环形线路从 2020 年到 2021 年有很大的变化，现在的高德地图和 <code>routes.csv</code> 不一致（四条环形线路里只有一条完全对上）。我在网上搜了好久，找到一个和数据集比较接近的公交车线路网站；张同学在此基础上凭借自己的想象力开始补充。</p>
<p>皓焜快补充完时，嘉之老师也在微信上肯定了我的质疑，还决心修复这个 bug：“我希望选手能把控整个题目，而不是把精力放到这些细节上去”。这下完蛋，我们的上分秘籍被公开了，张同学的一小时工作还毁于一旦。</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>21</mn><mo>:</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">21:30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">21</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span></span></span></span> 的时候写完第一版代码，提交后获得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mi>w</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">20w+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">20</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">+</span></span></span></span> 的成绩，暂列第二（此时总共只有五六个提交）。</p>
<p><strong>注意可以把询问输入到手机里的高德地图 APP，从而获得相对准确的估计值。</strong></p>
<p>我通过这个操作来评估结果，发现对环形公交的预测全炸了。经过分析，环形公交相邻两趟的间隔会小很多（因为它们不用折返），我就把环形线的间隔阈值改成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi>min</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">10\min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">min</span></span></span></span>。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>23</mn><mo>:</mo><mn>00</mn></mrow><annotation encoding="application/x-tex">23:00</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">23</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">00</span></span></span></span> 提交获得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn><mi>w</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">16w+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">16</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">+</span></span></span></span> 的成绩。</p>
<p>代码里有多处取平均值操作，张同学用 numpy 检测并删除了异常点。这一改动把线上分数提升到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>122749</mn></mrow><annotation encoding="application/x-tex">122749</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">122749</span></span></span></span>。</p>
<p>前三发结果一发比一发强，后续调了些异常点检测参数却没有变优。</p>
<h4 id="9-6-0-00-9-6-12-00">9.6 0:00 - 9.6 12:00</h4>
<p>这段时间是我队的“<strong>至暗时刻</strong>”。除去 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>:</mo><mn>30</mn><mo>∼</mo><mn>8</mn><mo>:</mo><mn>00</mn></mrow><annotation encoding="application/x-tex">2:30 \sim 8:00</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">00</span></span></span></span> 的睡觉时间，我们一直在旁门左道且徒劳无功。</p>
<p>最开始我是从手机 APP 的查询功能尝到了甜头，和张同学讨论把前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span> 个测试集的数据都去查一下，标个测试集。我们查了几个后发现十分麻烦，就想寻求一个自动化查询的方法。</p>
<p>通过搜索，我们发现高德地图还提供 Web API 服务。虽然没有直接对口的服务，但是能提供更一般的路径规划，且每个账号每天有多达 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30000</mn></mrow><annotation encoding="application/x-tex">30000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30000</span></span></span></span> 次的查询！询问恰好只有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.5</mn><mi>w</mi></mrow><annotation encoding="application/x-tex">2.5w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2.5</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 个，这不就是天意吗？</p>
<p>高德 Web API 里的路径规划正好有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.0</mn></mrow><annotation encoding="application/x-tex">1.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.0</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.0</mn></mrow><annotation encoding="application/x-tex">2.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2.0</span></span></span></span> 两个版本。我们一合计，张同学开发 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.0</mn></mrow><annotation encoding="application/x-tex">1.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.0</span></span></span></span> 的交互，我开发 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.0</mn></mrow><annotation encoding="application/x-tex">2.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2.0</span></span></span></span> 的交互（因为不同版本的格式不太一样）。一直开发到两点多，我们差不多时间调完，然后挂在后台去睡觉了。</p>
<p>回去路上我们在畅聊明早的结果。如果直接把高德结果提交会怎样？万一出题人就是拿高德做的标签，我们的误差岂不就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>？这个 Web 服务虽然是公开的，但是是不是不太好？要不要和出题人去说一下？</p>
<p>第二天早上我们汇总结果时，发现 <strong>事情没那么简单</strong>。每条询问会返回大量的结果，还要在其中筛选唯一合适的那条路线。此外，因为当前公交线路和数据集的不同，部分数据查不到结果或者误差会很大。</p>
<p>我先写了个解析脚本，把高德能跑出结果的数据都提取了出来，不能提取之处就用原来的代码替换。满怀信心地提交了一发，结果竟然爆到了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>32</mn><mi>w</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">32w+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">32</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">+</span></span></span></span>？？？随后我们进行了反复的实验，包括：A 问题用程序跑，B 问题调高德；把我们的结果和高德的结果取平均；切换 1.0 和 2.0 的结果……</p>
<p>结论只有一个：<strong>高德跑出来的结果就是垃圾，而且用的越多分数越差</strong>。</p>
<p>因为付出的沉默成本，到这我们还是不死心，变得鬼迷心窍了起来。通过对比，Web API 返回的结果比手机 APP 上的普遍偏大。于是张皓焜决定把前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn></mrow><annotation encoding="application/x-tex">30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span></span></span></span> 条询问在 APP 上手动查询，并替换原来我们的提交的前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn></mrow><annotation encoding="application/x-tex">30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span></span></span></span> 条，以此确定手机 APP 的查询结果是否有帮助；我则浪迹于其他企业的 Web API 服务，如百度地图、腾讯地图等。</p>
<p>最后我们双双 <strong>遇到了最坏的结果</strong>。张同学的新提交变劣了，说明高德地图 APP 也是垃圾；我则证明了百度和腾讯也都是垃圾。</p>
<h4 id="9-6-12-30-9-6-23-30">9.6 12:30 - 9.6 23:30</h4>
<p><strong>吃完午饭后我们决定彻底抛弃之前的错误战略，从头再来</strong>。整个下午我们的排名一路从第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 掉到了第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>。前排的竞争特别激烈，前三都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi>w</mi></mrow><annotation encoding="application/x-tex">10w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 零一些，第一甚至达到了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000070</mn></mrow><annotation encoding="application/x-tex">1000070</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1000070</span></span></span></span>。我们猜测他们队今日的提交次数已经用完了，否则随便手调两个结果就能破 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi>w</mi></mrow><annotation encoding="application/x-tex">10w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>。</p>
<p>我思考了很久，没想到怎么很好地套用机器学习模型。和我们一个房间的 <strong>三缺一队</strong> 正好相反：他们比赛一开始就搞机器学习模型，各种 lightgbm、catboost，各种 cnn 结构，讨论得不亦乐乎。</p>
<p>统计了一下不同时间段的轨迹信息，发现一天中变化很大（特别是早高峰和晚高峰），工作日和周末也有区别。</p>
<p>于是我着手优化之前的模型。把一天的时间每隔 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>h</mi></mrow><annotation encoding="application/x-tex">1h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1</span><span class="mord mathnormal">h</span></span></span></span> 拆开，连同当天是星期几，划成了若干个 <strong>时间段</strong>。某个历史信息如果量足够大，我就会将其按不同时间段分类储存，调用时也是分类调用。</p>
<p>改完 A 问题后提交获得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11.8</mn><mi>w</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">11.8w+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">11.8</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">+</span></span></span></span> 分，下午 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>17</mn><mo>:</mo><mn>00</mn></mrow><annotation encoding="application/x-tex">17:00</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">17</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">00</span></span></span></span> 改完 B 问题提交获得了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11.6</mn><mi>w</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">11.6w+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">11.6</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord">+</span></span></span></span> 分，日子感觉入了正轨。可惜的是，我们的排名只有略微上升，还是在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>∼</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">6 \sim 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span> 徘徊。而对面的三缺一队始终在我们后面一名，难兄难弟。</p>
<p>晚饭后的这段时间里，我脑补出了一个利用原数据生成近似标签的方法，并搭建了系统的评估平台，能对一组参数下的整个模型求出 MSE 的参考大小。我想通过这个方式来更加方便和准确地调参。</p>
<ul>
<li>对于 A 问题，从 <code>train.csv</code> 涉及的时间段里均匀地挑出一些，并在轨迹集合里把与他们相关的暂时删除。在这些删除的轨迹集合上随机起点和终点建立带标签的询问并测试。</li>
<li>对于 B 类型问题，假设某条公交线路 R 存在在轨迹集合里，可以从总轨迹中暂时删除 R 并建立前文的模型，同时在 R 上随机起点和终点建立带标签的询问。我们可以依次枚举所有存在的 R 并测试。</li>
</ul>
<p>可惜 python 的多线程是假的，写多进程传参又太麻烦。我的模型每次重跑大概要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15</mn><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">15min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">15</span><span class="mord mathnormal">min</span></span></span></span>，只能开着 jupyter notebook 在那里傻等。还好调的方向比较正确，在整个晚上一直在微小地进步。</p>
<p>举个例子，我通过统计 B 问题的预测值与“标签”的偏差，发现我们的预测值大多偏小；随后我引入了“停靠时间”这一概念，把 B 问题的结果加上与站点个数成比例的停靠时间，成功改造成了近似无偏的估计。</p>
<h4 id="9-6-23-30-9-7-10-00">9.6 23:30 - 9.7 10:00</h4>
<p>正当人困马乏之际，大赛微信群里出了个劲爆消息：DC 平台上的打分有漏洞，评估方式将从 MSE 改成 RMSE。重测后，好多前排队伍瞬间消失，我们队直接从第八跃到第二，<strong>三缺一队</strong> 紧随其后跳到第三。</p>
<p>我开始还觉得奇怪，评估方式不就是开个根号嘛，单调性又没变，难道某些深度学习的 loss 函数因为多了根号导致反向传播走了弯路？后来结合微信群的消息我才明白，DC 平台对分数的储存有一定 bug：超过某个数量级的得分会被截取一个固定的前缀。难怪榜一一直在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100070</mn></mrow><annotation encoding="application/x-tex">100070</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100070</span></span></span></span> 不动，因为变小地扰动反而会将分数更新成 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>999</mn><mi>x</mi><mi>x</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">999xxx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">999</span><span class="mord mathnormal">xxx</span></span></span></span>。</p>
<p>这 bug 对前排的队伍影响巨大，有些队员直接在微信群里崩溃了，但是大赛组委会拒绝了延期的提议（估计颁奖流程都准备好了，延期太麻烦了）。而方总一直在群里给大家进行哲学引导。反思我们的做题流程，一直在寻求对预测结果正确性的把控（前期的高德 or 后期的平台），所以遇到这种 bug 应该也能及时发现。</p>
<p>凌晨时候我一边刷着参数，一边写了点 PPT 的文字。感觉好像在做梦一般。</p>
<h2 id="返程-颁奖">返程 &amp; 颁奖</h2>
<p>作为社畜，我周二早上 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>:</mo><mn>25</mn></mrow><annotation encoding="application/x-tex">6:25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">25</span></span></span></span> 起床，坐滴滴去赶高铁，在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>:</mo><mn>55</mn></mrow><annotation encoding="application/x-tex">8:55</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">55</span></span></span></span> 抵达杭州东站， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><mo>:</mo><mn>45</mn></mrow><annotation encoding="application/x-tex">9:45</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">45</span></span></span></span> 抵达公司。</p>
<p>返程路上我一直在刷着排行榜，最后成功苟住了第三！哎，实力不济运气来凑，要是没出 bug 不知能排第几。</p>
<p>PPT 展示和颁奖就交给队友张皓焜啦。我也在线上观看了 PPT 展示。可惜不能和颁奖的专家合影了。</p>
<p><img src="/Datathon2021/result.jpg" alt></p>
<h2 id="决赛">决赛</h2>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2021.10.24</mn></mrow><annotation encoding="application/x-tex">2021.10.24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2021.10.24</span></span></span></span> 的决赛比较肝，时隔两年回来补充一些经过。</p>
<p><img src="/Datathon2021/final.jpg" alt></p>
<p>决赛热身赛题是吴嘉之老师出的计算几何代码性能优化。作为 World Final Team 里唯一指定计算几何手，这题我本势在必得。可惜三小时的时间限制太短，我没法深入理解代码的用意，只能粗略地对一些表层运算做了优化，效果不佳。从最终的排行榜中可以看出，我们（不想上班）虽然比大部分队伍得分高，但被吴老师的基础优化完虐。</p>
<p><img src="/Datathon2021/geometry.jpg" alt></p>
<p>决赛正式赛从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10.21</mn></mrow><annotation encoding="application/x-tex">10.21</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10.21</span></span></span></span> 晚上开始选题，一直持续到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10.24</mn></mrow><annotation encoding="application/x-tex">10.24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10.24</span></span></span></span>（上午进行最终答辩）。有多个赛道，大致分为《城市画像描述》、《园区内图像行人识别挑战》、《AI 音乐创作》、《脑电波实时生成音乐》和《开放性 AI 应用》五个题目。每个队伍只能选择其中一个赛道，每个赛道只有第一名能获得现金奖励。</p>
<p><img src="/Datathon2021/finalproblem.jpg" alt></p>
<p>这其中，水最深的课题是《开放性 AI 应用》，因为部分有“积淀”的参赛队伍可以随手把他们实验室的数据和成果拿过来，无非就是做个 PPT 展示即可。我和张皓焜没啥积累，这个赛题当然最先放弃。最易上手的课题是《AI 音乐创作》，因为赛题组已经给出了网易音乐生成的轮子，随便给几个提示词再微调一下生成的词曲即可。由于参赛门槛太低（势必导致参赛人数较多），而奖金只有一万块，我和张皓焜也放弃了。剩下三个赛题比拼的是硬实力，都有较为客观的评价体系（准确度 or 成品展示），我们没啥选择的偏好，就一咬牙选了最难的《脑电波实时生成音乐》。当最后得知有四支队伍选了这个赛道时（比想象中的多），我其实还是蛮后悔的。</p>
<p>三天的艰难程度自然不必多说。发了一个脑电波仪，通过连接 SDK，可以实时传递一些测量数据。</p>
<ul>
<li>我以为的场景：当一个人在歌唱时，脑电波会直接反映出音调，做个映射即可；</li>
<li>实际的场景：脑电波不仅无法传达歌唱者的声音，甚至无法区分一个人是在唱歌还是静默地坐着。</li>
</ul>
<p>由于缺少睡眠，张皓焜经常在头戴脑电波仪时睡去——此时我发现，测量的数据会有断崖式地下降。前两天，我们除了搭建了 SDK 和手机 APP 等工程操作，唯一的探究成果是：<strong>脑电波只能准确区分一个人是否在睡眠状态</strong>。</p>
<p>第三天实在太急了，通宵测试+写映射代码。经过反复的尝试，我们发现当朗诵或歌唱时，<strong>过强和过弱的情绪反应会使脑电波的数值有微小的变化</strong>。我们抓住了这根救命稻草，决定开发一个“伴奏”的思路：通过脑电波检测演唱者当前的情绪状态，并生成对应情绪的伴奏。由于时间不足，我们没办法细化从无到有生成伴奏，只能去搜集了一些诸如钢琴、笛子、架子鼓等现成的片段，嵌在 APP 里。然后 APP 对脑电波数据做一个简单的多分类，再转化成音乐输出。效果差强人意，还是有概率出现“假装很高亢，伴奏很安静”的尴尬局面，所以我们决定预录制视频。我和张皓焜分头录制，我选了《北京欢迎你》和《本草纲目》作为慢和快的代表，而他选了林达浪的《还是会想你》。我们在深夜找了个房间，一遍又一遍尝试和录制，勉强搞出一个成品，清晨再胡乱糊一个 PPT。</p>
<p><img src="/Datathon2021/video.jpg" alt></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10.24</mn></mrow><annotation encoding="application/x-tex">10.24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10.24</span></span></span></span> 上午是 PPT 展示。和预期的差不多，当开始播放视频时，我俩浮夸的演技逗得评委和观众哈哈大笑。</p>
<p><img src="/Datathon2021/presentation.jpg" alt></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10.24</mn></mrow><annotation encoding="application/x-tex">10.24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10.24</span></span></span></span> 下午是颁奖典礼，揭晓每个赛道的冠军。到场的嘉宾都比较重量级，除了个推和其他商业公司的领导外，还有很多来自淳安县和杭州市的领导。我们赛道比较特殊，由包括我们在内的两支队伍共同获得大奖——估计是评委从专业性和搞笑性两个维度各选了一支出来。结束后匆匆坐高铁回家，满脑子都是补觉。</p>
<p><img src="/Datathon2021/award.jpg" alt></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://jiangshibiao.github.io">jiangshibiao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://jiangshibiao.github.io/Datathon2021/">https://jiangshibiao.github.io/Datathon2021/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Competition/">Competition</a><a class="post-meta__tags" href="/tags/Log/">Log</a></div><div class="post-share"><div class="social-share" data-image="/../post_images/Datathon2021.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>Sponsor</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechatpay.png" target="_blank"><img class="post-qr-code-img" src="/images/wechatpay.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/images/alipay.png" target="_blank"><img class="post-qr-code-img" src="/images/alipay.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Hexo-Butterfly/" title="Hexo-Butterfly 主题配置"><img class="cover" src="/../post_images/Hexo-Butterfly.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Hexo-Butterfly 主题配置</div></div><div class="info-2"><div class="info-item-1">记录了本博客采用的 Hexo/Butterfly 框架的部署配置。</div></div></div></a><a class="pagination-related" href="/ACM-From-Zero/" title="从零开始 ICPC"><img class="cover" src="/../post_images/Selected-Problems-from-ACM-ICPC.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">从零开始 ICPC</div></div><div class="info-2"><div class="info-item-1">OI/ICPC 知识图和难度分级。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/CodeCraft2021/" title="2021华为软件精英挑战赛总结"><img class="cover" src="/../post_images/CodeCraft2021.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-07-27</div><div class="info-item-2">2021华为软件精英挑战赛总结</div></div><div class="info-2"><div class="info-item-1">记录了我 2021.03.10~2021.04.24 获得华为软件精英挑战赛全球季军的比赛历程。</div></div></div></a><a class="pagination-related" href="/ACM-From-Zero/" title="从零开始 ICPC"><img class="cover" src="/../post_images/Selected-Problems-from-ACM-ICPC.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2021-10-10</div><div class="info-item-2">从零开始 ICPC</div></div><div class="info-2"><div class="info-item-1">OI/ICPC 知识图和难度分级。</div></div></div></a><a class="pagination-related" href="/CoSQL/" title="CoSQL 数据集"><img class="cover" src="/../post_images/CoSQL.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-07-27</div><div class="info-item-2">CoSQL 数据集</div></div><div class="info-2"><div class="info-item-1">记录了我 2020.3-2020.6 在浙江大学上的《机器学习》这门课的知识点。</div></div></div></a><a class="pagination-related" href="/Life-is-a-Moment-Junior-High-School/" title="朝花夕拾·漫谈初中"><img class="cover" src="/../post_images/Life-is-a-Moment-Junior-High-School.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-07-27</div><div class="info-item-2">朝花夕拾·漫谈初中</div></div><div class="info-2"><div class="info-item-1">记录了初中校园生活的记忆片段。</div></div></div></a><a class="pagination-related" href="/Life-is-a-Moment-Primary-School/" title="朝花夕拾·童年"><img class="cover" src="/../post_images/Life-is-a-Moment-Primary-School.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2021-10-10</div><div class="info-item-2">朝花夕拾·童年</div></div><div class="info-2"><div class="info-item-1">记录了幼儿园和小学的校园生活的记忆片段。</div></div></div></a><a class="pagination-related" href="/Life-is-a-Moment-Senior-High-School/" title="朝花夕拾·漫谈高中"><img class="cover" src="/../post_images/Life-is-a-Moment-Senior-High-School.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2023-07-30</div><div class="info-item-2">朝花夕拾·漫谈高中</div></div><div class="info-2"><div class="info-item-1">记录了高中校园生活的记忆片段。</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">jiangshibiao</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jiangshibiao"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/jiangshibiao" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:jiangshibiao1999@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://u.wechat.com/MMOFXmMIbxx2LV_lVEow1EY" target="_blank" title="Weixin"><i class="fab fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">欢迎提出任何有用的建议~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%B7%E9%80%89-%E7%BB%84%E9%98%9F"><span class="toc-number">1.</span> <span class="toc-text">海选 &amp; 组队</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%B5%E8%BE%BE%E7%8E%B0%E5%9C%BA-%E5%A4%8F%E4%BB%A4%E8%90%A5"><span class="toc-number">2.</span> <span class="toc-text">抵达现场 &amp; 夏令营</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E8%B5%9B%E6%AF%94%E8%B5%9B%E8%AE%B0%E5%BD%95"><span class="toc-number">3.</span> <span class="toc-text">复赛比赛记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-10-00-18-00"><span class="toc-number">3.0.1.</span> <span class="toc-text">9.5 10:00-18:00</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-18-20-9-5-24-00"><span class="toc-number">3.0.2.</span> <span class="toc-text">9.5 18:20 - 9.5 24:00</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-0-00-9-6-12-00"><span class="toc-number">3.0.3.</span> <span class="toc-text">9.6 0:00 - 9.6 12:00</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-12-30-9-6-23-30"><span class="toc-number">3.0.4.</span> <span class="toc-text">9.6 12:30 - 9.6 23:30</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-6-23-30-9-7-10-00"><span class="toc-number">3.0.5.</span> <span class="toc-text">9.6 23:30 - 9.7 10:00</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E7%A8%8B-%E9%A2%81%E5%A5%96"><span class="toc-number">4.</span> <span class="toc-text">返程 &amp; 颁奖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%B3%E8%B5%9B"><span class="toc-number">5.</span> <span class="toc-text">决赛</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Multi-Party-ECDSA-Threshold-Signatures/" title="多方计算之 ECDSA 门限签名"><img src="/../post_images/Multi-Party-ECDSA-Threshold-Signatures.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="多方计算之 ECDSA 门限签名"/></a><div class="content"><a class="title" href="/Multi-Party-ECDSA-Threshold-Signatures/" title="多方计算之 ECDSA 门限签名">多方计算之 ECDSA 门限签名</a><time datetime="2025-08-04T16:00:00.000Z" title="Updated 2025-08-05 2025-08-05T00:00:00+08:00">2025-08-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Board-Game-Light-Fun/" title="轻度桌游推荐"><img src="/images/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="轻度桌游推荐"/></a><div class="content"><a class="title" href="/Board-Game-Light-Fun/" title="轻度桌游推荐">轻度桌游推荐</a><time datetime="2025-07-22T16:00:00.000Z" title="Updated 2025-07-23 2025-07-23T00:00:00+08:00">2025-07-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Introduction-to-Cryptography/" title="密码学导论"><img src="/../post_images/Cryptography-in-Engineering.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="密码学导论"/></a><div class="content"><a class="title" href="/Introduction-to-Cryptography/" title="密码学导论">密码学导论</a><time datetime="2025-07-22T16:00:00.000Z" title="Updated 2025-07-23 2025-07-23T00:00:00+08:00">2025-07-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Exploring-DeepSeek/" title="探索 DeepSeek"><img src="/../post_images/DeepSeek.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="探索 DeepSeek"/></a><div class="content"><a class="title" href="/Exploring-DeepSeek/" title="探索 DeepSeek">探索 DeepSeek</a><time datetime="2025-07-20T16:00:00.000Z" title="Updated 2025-07-21 2025-07-21T00:00:00+08:00">2025-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Board-Game-Heavy-Strategy/" title="重度桌游推荐"><img src="/images/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="重度桌游推荐"/></a><div class="content"><a class="title" href="/Board-Game-Heavy-Strategy/" title="重度桌游推荐">重度桌游推荐</a><time datetime="2025-07-19T16:00:00.000Z" title="Updated 2025-07-20 2025-07-20T00:00:00+08:00">2025-07-20</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By jiangshibiao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (false) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="没找到任何数据" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>